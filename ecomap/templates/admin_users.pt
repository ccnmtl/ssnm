<?xml version="1.0"?>
<html metal:use-macro="sitemacros/macros/ecomap">

    <div metal:fill-slot="content" id="content">

        <div id="logout">
            You are logged in as <span tal:content="loginName"/> <a href="/logout">Log Out</a>
        </div>

        <form action="admin_users" method="post">
        
        <p>Add user by UNI:<input type="text" name="user_uni" width="10" /><input type="submit" name="action" value="Add User" /></p>
        
        <p><a href="/add_guest_account_form">Add non-UNI (Guest) user</a></p>

        <h1>Users</h1>
        
        <table tal:condition="allUsers">
            <tr><th></th><th>First Name</th><th>Last Name</th><th>User ID</th><th>Account type</th><th>Security Level</th></tr>
            <tal:block repeat="thisUser allUsers">
                <tr>
                <td><input type="checkbox" name="user_id" tal:attributes="value string:${thisUser/id}"/></td>
                <td tal:content="thisUser/firstname" />
                <td tal:content="thisUser/lastname" />
                <td tal:content="thisUser/uni" />

                <td tal:condition="python:thisUser.password == ''">UNI</td>
                <td tal:condition="python:thisUser.password != ''">Guest</td>

                <td tal:condition="python:thisUser.securityLevel == 1">Admin</td>
                <td tal:condition="python:thisUser.securityLevel == 2">User</td>
                </tr>
            </tal:block>
        </table>
        
        <input tal:condition="allUsers" type="submit" name="action" value="Delete Selected" onclick="return confirm('Are you sure you want to completely erase these users??');"/>
        <input tal:condition="allUsers" type="submit" name="action" value="Toggle Admin"/>
        
        </form>

    </div>

</html>
