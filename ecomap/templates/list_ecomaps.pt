<?xml version="1.0"?>

<html metal:use-macro="sitemacros/macros/ecomap">

	<div metal:fill-slot="content" id="content">
		
		<div id="breadcrumbbar">
			<tal:block condition="only_course">
        		<span class="here">You are Here: </span>My Courses &gt; <span tal:content="course_name" />
			</tal:block>
			<tal:block condition="not:only_course">
        		<span class="here">You are Here: </span><a href="/course/">My Courses</a> &gt; <span tal:content="course_name" />
			</tal:block>
		</div>
		
		<metal:block define-macro="message">
			<div tal:condition="message" tal:content="message" class="message" />
		</metal:block>
		
		<div id="container">
		
			<div class="addbar" tal:condition="my_ecomaps">
				<form method="link" action="create_new">
					<input class="createmap" type="submit" value="Create New Map" />
				</form>
			</div>
			
			<h2>
				My HOPE-NY Community Maps
			</h2>
			
			<p tal:condition="not:my_ecomaps">
				You have no HOPE-NY Community Maps. 
				<a href="create_new">
					Click here
				</a>
				to create one. 
			</p>
			
			<form action="update" method="post">
			
				<table tal:condition="my_ecomaps" class="infotable" cellspacing="0" summary="Network Map Table">
				
					<colgroup id="maptablecols" span="5">
						<col class="name" />
						<col class="description" />
						<col class="created" />
						<col class="modified" />
						<col class="delete" />
					</colgroup>
					
					<thead>
						<tr>
							<th>
								Subject Name
							</th>
							<th>
								Map Description
							</th>
							<th>
								Created
							</th>
							<th>
								Modified
							</th>
							<th class="centered">
								Delete
							</th>
						</tr>
					</thead>
					
					<tbody>
						<tal:block repeat="ecomap my_ecomaps">
							<tr>
								<td>
									<a tal:attributes="href string:/ecomap/${ecomap/id}/" tal:content="ecomap/name" />
								</td>
								<td tal:content="ecomap/description">
								</td>
								<td tal:content="ecomap/formatted_created">
								</td>
								<td tal:content="ecomap/formatted_modified">
								</td>
								<td class="centered">
									<input type="checkbox" name="ecomap_id" tal:attributes="value string:${ecomap/id}" />
								</td>
							</tr>
						</tal:block>
					</tbody>
					
				</table>
				
				<div class="deletebar">
					<input tal:condition="my_ecomaps" type="submit" name="action_delete" value="Delete Selected" onclick="return confirm('Are you sure you want to delete the selected items?');" />
					<!--<input type="submit" name="action" value="share"/>-->
				</div>
				
				<h2 style="cursor:pointer" tal:condition="all_ecomaps" onclick="document.getElementById('allmaps').style.display = (document.getElementById('allmaps').style.display == 'none') ? 'block' : 'none'; document.getElementById('imgToggle').src = (document.getElementById('allmaps').style.display == 'none') ? '/images/closed.gif' : '/images/open.gif'">
					<a href="#"><img id="imgToggle" class="toggle" src="/images/closed.gif" alt="" /></a> All HOPE-NY Community Maps
				</h2>
				
				<div id="allmaps" style="display:none">
				
					<table tal:condition="all_ecomaps" class="infotable" cellspacing="0" summary="Network Map Table">
					
						<colgroup id="allmaptablecols" span="6">
							<col class="name" />
							<col class="description" />
							<col class="owner" />
							<col class="created" />
							<col class="modified" />
							<col class="delete" />
						</colgroup>
						
						<thead>
							<tr>
								<th>
									Name
								</th>
								<th>
									Map Description
								</th>
								<th>
									Owner
								</th>
								<th>
									Created
								</th>
								<th>
									Modified
								</th>
								<th class="centered">
									Delete
								</th>
							</tr>
						</thead>
						
						<tbody>
						<tal:block repeat="ecomap all_ecomaps">
							<tr>
								<td>
									<a tal:attributes="href string:/ecomap/${ecomap/id}/" tal:content="ecomap/name" />
								</td>
								<td tal:content="ecomap/description">
								</td>
								<td tal:content="string:${ecomap/owner/firstname} ${ecomap/owner/lastname}">
								</td>
								<td tal:content="ecomap/formatted_created">
								</td>
								<td tal:content="ecomap/formatted_modified">
								</td>
								<td class="centered">
									<input type="checkbox" name="ecomap_id" tal:attributes="value string:${ecomap/id}" />
								</td>
							</tr>
						</tal:block>
						</tbody>
						
					</table>
					
					<div class="deletebar">
						<input tal:condition="my_ecomaps" type="submit" name="action_delete" value="Delete Selected" onclick="return confirm('Are you sure you want to delete the selected items?');" />
						<!--<input type="submit" name="action" value="share"/>-->
					</div>
					
				</div>
				
			</form>
			
		</div>
		
	</div>
	
</html>
