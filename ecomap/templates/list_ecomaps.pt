<?xml version="1.0"?>
<html metal:use-macro="sitemacros/macros/ecomap">
<body metal:fill-slot="body">
<div id="header"><img src="/images/logo.png" /></div>

<div id="logout">You are logged in as <span tal:content="loginName"/> <a href="/logout">Log Out</a></div>
<metal:block use-macro="sitemacros/macros/message" />
<p/>
<form tal:attributes="action postTo" method="post">

<a href="/course">my courses</a> > <span tal:content="courseDescription" />

<h3>My Social Support Network Maps</h3>

<p tal:condition="not:myEcomaps">You have no Social Support Network Maps.  <a href="create_new">Click here</a> to create one.</p>

<a tal:condition="myEcomaps" href="create_new">Create New Map</a>


<table tal:condition="myEcomaps">
<tr><th></th><th>Subject Name</th><th>Map Description</th><th>Created</th><th>Modified</th><!--<th>Public</th>--></tr>
<tr tal:repeat="ecomap myEcomaps">
<td><input type="checkbox" name="ecomap_id" tal:attributes="value string:${ecomap/id}"/><!--<a tal:attributes="href string:/ecomap/${ecomap/id}/delete/">DEL</a>--></td>
<td><a tal:attributes="href string:/ecomap/${ecomap/id}/" tal:content="ecomap/name"/></td>
<td tal:content="ecomap/description"></td>
<td tal:content="ecomap/createdStr"></td>
<td tal:content="ecomap/modifiedStr"></td>
<!--<td><img tal:attributes="src string:/images/${ecomap/public}.png"/></td>-->
</tr>
</table>

<input tal:condition="myEcomaps" type="submit" name="action" value="Delete Selected" onclick="return confirm('Are you sure you want to delete the selected items??');"/> <!--<input type="submit" name="action" value="share"/>-->

<!--
<h1 tal:condition="publicEcomaps">Public Social Support Network Maps</h1>

<table tal:condition="publicEcomaps">
<tr><th></th><th>Name</th><th>Description</th><th>Owner</th></tr>
<tr tal:repeat="ecomap publicEcomaps">
<td></td>
<td><a tal:attributes="href string:/ecomap/${ecomap/id}/" tal:content="ecomap/name"/></td>
<td tal:content="ecomap/description"></td>
<td tal:content="string:${ecomap/owner/firstname} ${ecomap/owner/lastname}"></td>
</tr>
</table>
-->

<h4 style="cursor:pointer" tal:condition="students" onClick="document.getElementById('allstudents').style.display = (document.getElementById('allstudents').style.display == 'none') ? 'block' : 'none'">Students enrolled</h4>

<div id="allstudents" style="display:none">
<table tal:condition="students">
<tr><th></th><th>First Name</th><th>Last Name</th><th>UNI</th></tr>
<tr tal:repeat="student students">
<td></td>
<td tal:content="student/firstname" />
<td tal:content="student/lastname" />
<td tal:content="student/uni" />
</tr>
</table>
</div>

<h4 style="cursor:pointer" tal:condition="allEcomaps" onClick="document.getElementById('allmaps').style.display = (document.getElementById('allmaps').style.display == 'none') ? 'block' : 'none'">All Social Support Network Maps</h4>

<div id="allmaps" style="display:none">
<table tal:condition="allEcomaps">
<tr><th></th><th>Name</th><th>Description</th><th>Owner</th><th>Created</th><th>Modified</th></tr>
<tr tal:repeat="ecomap allEcomaps">
<td><input type="checkbox" name="ecomap_id" tal:attributes="value string:${ecomap/id}"/></td>
<td><a tal:attributes="href string:/ecomap/${ecomap/id}/" tal:content="ecomap/name"/></td>
<td tal:content="ecomap/description"></td>
<td tal:content="string:${ecomap/owner/firstname} ${ecomap/owner/lastname}"></td>
<td tal:content="ecomap/createdStr"></td>
<td tal:content="ecomap/modifiedStr"></td>
</tr>
</table>
</div>

</form>

</body>
</html>
